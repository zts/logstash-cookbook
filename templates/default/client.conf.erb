# Basic logstash server config
input {
  file {
    type => "syslog"

    # Wildcards work, here :)
    path => [ "/var/log/messages", "/var/log/secure", "/var/log/yum.log" ]
  }

  file {
        type => "mcollective"
	path => [ "/var/log/mcollective.log", "/var/log/mcollective-audit.log" ]
  }

 file {
   type => "apache-access"
   path => "/var/log/apache2/access.log"
 }

 file {
   type => "apache-error"
   path => "/var/log/apache2/error.log"
 }
}

output {
  # Emit events to stdout for easy debugging of what is going through
  # logstash.
  # stdout { }

  amqp {
    <% amqp = node['logstash']['amqp'] %>
    host => "<%= amqp['host'] %>"
    port => "<%= amqp['port'] %>"
    exchange_type => "<%= amqp['exchange_type'] %>"
    name => "logstash"
  }
}
